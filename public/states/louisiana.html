<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Haunted Places in Louisiana | Haunted Places Directory</title>
  <meta name="description" content="Explore 50 haunted locations across Louisiana. From New Orleans' French Quarter to the haunted plantations along River Road, discover the Pelican State's most paranormal places.">

  <!-- Open Graph -->
  <meta property="og:title" content="Haunted Places in Louisiana">
  <meta property="og:description" content="Explore 50 haunted locations across Louisiana. Ghost stories, voodoo history, and paranormal activity.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://haunted-places.pages.dev/states/louisiana">

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "ItemList",
    "name": "Haunted Places in Louisiana",
    "description": "A directory of haunted locations in Louisiana",
    "itemListElement": []
  }
  </script>

  <!-- Fonts & Tailwind -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
          colors: {
            'dark': '#0a0a0f',
            'dark-card': '#141419',
            'dark-border': '#2a2a35',
            'accent': '#e94560',
            'accent-hover': '#ff6b6b',
            'muted': '#6b7280',
            'ghost': '#9ca3af',
          }
        }
      }
    }
  </script>
  <style>
    .city-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px rgba(233, 69, 96, 0.2);
    }
    .place-card:hover {
      border-color: #e94560;
    }
  </style>
</head>
<body class="bg-dark text-gray-100 min-h-screen">

  <!-- Breadcrumb -->
  <nav class="max-w-6xl mx-auto px-4 pt-6">
    <ol class="flex items-center gap-2 text-sm">
      <li><a href="/" class="text-muted hover:text-accent transition-colors">Home</a></li>
      <li class="text-muted">/</li>
      <li class="text-gray-100">Louisiana</li>
    </ol>
  </nav>

  <!-- Hero Section -->
  <header class="relative overflow-hidden">
    <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-accent/10 via-transparent to-transparent"></div>
    <div class="max-w-6xl mx-auto px-4 py-12 md:py-16 relative">
      <div class="text-center max-w-3xl mx-auto">
        <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold tracking-tight mb-4">
          Haunted Places in <span class="text-accent">Louisiana</span>
        </h1>
        <p id="hero-count" class="text-xl text-accent font-semibold mb-4">--- haunted locations</p>
        <p class="text-lg text-ghost max-w-2xl mx-auto">
          Steeped in voodoo traditions, French colonial history, and plantation ghosts, Louisiana is America's most supernatural state. The spirits of New Orleans' French Quarter and the restless souls of River Road plantations await your visit.
        </p>
      </div>
    </div>
  </header>

  <!-- Browse by City -->
  <section class="max-w-6xl mx-auto px-4 py-12">
    <h2 class="text-2xl md:text-3xl font-semibold tracking-tight mb-8 text-center">
      Browse by City
    </h2>
    <div id="cities-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
      <!-- Loading skeleton -->
      <div class="bg-dark-card border border-dark-border rounded-xl p-4 animate-pulse">
        <div class="h-5 bg-dark-border rounded w-3/4 mb-2"></div>
        <div class="h-4 bg-dark-border rounded w-1/2"></div>
      </div>
      <div class="bg-dark-card border border-dark-border rounded-xl p-4 animate-pulse">
        <div class="h-5 bg-dark-border rounded w-3/4 mb-2"></div>
        <div class="h-4 bg-dark-border rounded w-1/2"></div>
      </div>
      <div class="bg-dark-card border border-dark-border rounded-xl p-4 animate-pulse">
        <div class="h-5 bg-dark-border rounded w-3/4 mb-2"></div>
        <div class="h-4 bg-dark-border rounded w-1/2"></div>
      </div>
      <div class="bg-dark-card border border-dark-border rounded-xl p-4 animate-pulse">
        <div class="h-5 bg-dark-border rounded w-3/4 mb-2"></div>
        <div class="h-4 bg-dark-border rounded w-1/2"></div>
      </div>
    </div>
  </section>

  <!-- All Places -->
  <section class="bg-dark-card/30 border-y border-dark-border">
    <div class="max-w-6xl mx-auto px-4 py-12">
      <h2 class="text-2xl md:text-3xl font-semibold tracking-tight mb-8 text-center">
        All Haunted Places in Louisiana
      </h2>
      <div id="places-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Loading skeleton -->
        <div class="bg-dark-card border border-dark-border rounded-xl p-5 animate-pulse">
          <div class="h-5 bg-dark-border rounded w-3/4 mb-3"></div>
          <div class="h-4 bg-dark-border rounded w-1/2 mb-4"></div>
          <div class="h-16 bg-dark-border rounded mb-3"></div>
          <div class="h-4 bg-dark-border rounded w-1/4"></div>
        </div>
        <div class="bg-dark-card border border-dark-border rounded-xl p-5 animate-pulse">
          <div class="h-5 bg-dark-border rounded w-3/4 mb-3"></div>
          <div class="h-4 bg-dark-border rounded w-1/2 mb-4"></div>
          <div class="h-16 bg-dark-border rounded mb-3"></div>
          <div class="h-4 bg-dark-border rounded w-1/4"></div>
        </div>
        <div class="bg-dark-card border border-dark-border rounded-xl p-5 animate-pulse">
          <div class="h-5 bg-dark-border rounded w-3/4 mb-3"></div>
          <div class="h-4 bg-dark-border rounded w-1/2 mb-4"></div>
          <div class="h-16 bg-dark-border rounded mb-3"></div>
          <div class="h-4 bg-dark-border rounded w-1/4"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="border-t border-dark-border bg-dark-card/50">
    <div class="max-w-6xl mx-auto px-4 py-8">
      <div class="text-center">
        <a href="/" class="text-lg font-semibold hover:text-accent transition-colors">Haunted Places Directory</a>
        <p class="text-muted text-sm mt-2">
          Documenting America's most haunted locations, one ghost story at a time.
        </p>
      </div>
    </div>
  </footer>

  <!-- Error Toast -->
  <div id="error-toast" class="hidden fixed bottom-4 right-4 bg-red-900/90 border border-red-700 text-red-100 px-4 py-3 rounded-lg shadow-lg max-w-sm">
    <p class="font-medium">Failed to load data</p>
    <p class="text-sm text-red-300">Please refresh the page to try again.</p>
  </div>

  <script>
    const API_BASE = '/api';
    const STATE_CODE = 'LA';
    const STATE_NAME = 'Louisiana';

    // Category icons
    const categoryIcons = {
      'hotel': 'üè®',
      'mansion': 'üèöÔ∏è',
      'cemetery': 'ü™¶',
      'prison': '‚õìÔ∏è',
      'hospital': 'üè•',
      'theater': 'üé≠',
      'restaurant': 'üçΩÔ∏è',
      'battlefield': '‚öîÔ∏è',
      'lighthouse': 'üóº',
      'museum': 'üèõÔ∏è',
      'university': 'üéì',
      'plantation': 'üåæ',
      'other': 'üëª'
    };

    // Show error toast
    function showError() {
      document.getElementById('error-toast').classList.remove('hidden');
    }

    // Fetch with error handling
    async function fetchAPI(endpoint) {
      try {
        const response = await fetch(`${API_BASE}${endpoint}`);
        if (!response.ok) throw new Error('API error');
        return await response.json();
      } catch (error) {
        console.error(`Error fetching ${endpoint}:`, error);
        throw error;
      }
    }

    // Load cities for this state
    async function loadCities() {
      try {
        const response = await fetchAPI(`/cities?state=${STATE_CODE}`);
        const cities = response.data || response;
        const grid = document.getElementById('cities-grid');

        if (cities.length === 0) {
          grid.innerHTML = `
            <div class="col-span-full text-center py-8 text-muted">
              No cities found for ${STATE_NAME}.
            </div>
          `;
          return;
        }

        // Sort by place count descending
        cities.sort((a, b) => (b.place_count || b.count) - (a.place_count || a.count));

        grid.innerHTML = cities.map(city => {
          const count = city.place_count || city.count;
          const citySlug = city.city.toLowerCase().replace(/\s+/g, '-');
          return `
          <a href="/states/${STATE_CODE.toLowerCase()}/${citySlug}" class="city-card block bg-dark-card rounded-xl p-4 hover:shadow-lg hover:shadow-accent/10 transition-all duration-300">
            <h3 class="font-semibold mb-1">${escapeHtml(city.city)}</h3>
            <p class="text-muted text-sm">${count} ${count === 1 ? 'place' : 'places'}</p>
          </a>
        `;
        }).join('');
      } catch (error) {
        document.getElementById('cities-grid').innerHTML = `
          <div class="col-span-full text-center py-8 text-muted">
            Failed to load cities. Please refresh to try again.
          </div>
        `;
      }
    }

    // Load all places for this state
    async function loadPlaces() {
      try {
        const response = await fetchAPI(`/places?state=${STATE_CODE}&limit=200`);
        const places = response.data || response.places || response;
        const grid = document.getElementById('places-grid');

        // Update hero count
        document.getElementById('hero-count').textContent = `${places.length} haunted locations`;

        if (places.length === 0) {
          grid.innerHTML = `
            <div class="col-span-full text-center py-8 text-muted">
              No haunted places found in ${STATE_NAME}.
            </div>
          `;
          return;
        }

        // Sort alphabetically by name
        places.sort((a, b) => a.name.localeCompare(b.name));

        grid.innerHTML = places.map(place => {
          const imageUrl = place.image_url
            ? `https://haunted-places.pages.dev/images/${place.image_url}`
            : null;
          return `
          <a href="/place/${place.slug}" class="place-card block bg-dark-card border border-dark-border rounded-xl overflow-hidden hover:shadow-lg hover:shadow-accent/10 transition-all duration-300 group">
            ${imageUrl ? `
            <div class="relative h-32 overflow-hidden">
              <img
                src="${imageUrl}"
                alt="${escapeHtml(place.name)}"
                class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                loading="lazy"
                onerror="this.parentElement.style.display='none'"
              >
              <div class="absolute inset-0 bg-gradient-to-t from-dark-card via-transparent to-transparent"></div>
            </div>
            ` : ''}
            <div class="p-5">
              <div class="flex items-start justify-between mb-2">
                <h3 class="font-semibold group-hover:text-accent transition-colors">${escapeHtml(place.name)}</h3>
                <span class="text-xl ml-2">${categoryIcons[place.category] || 'üëª'}</span>
              </div>
              <p class="text-muted text-sm mb-3">${escapeHtml(place.city)} ¬∑ <span class="capitalize">${place.category}</span></p>
              <p class="text-ghost text-sm line-clamp-2">${escapeHtml(truncate(place.description, 100))}</p>
            </div>
          </a>
        `;
        }).join('');

        // Update structured data
        updateStructuredData(places);
      } catch (error) {
        document.getElementById('places-grid').innerHTML = `
          <div class="col-span-full text-center py-8 text-muted">
            Failed to load places. Please refresh to try again.
          </div>
        `;
        showError();
      }
    }

    // Update structured data for SEO
    function updateStructuredData(places) {
      const script = document.querySelector('script[type="application/ld+json"]');
      if (script) {
        const data = {
          "@context": "https://schema.org",
          "@type": "ItemList",
          "name": `Haunted Places in ${STATE_NAME}`,
          "description": `A directory of ${places.length} haunted locations in ${STATE_NAME}`,
          "numberOfItems": places.length,
          "itemListElement": places.slice(0, 10).map((place, index) => ({
            "@type": "ListItem",
            "position": index + 1,
            "name": place.name,
            "url": `https://haunted-places.pages.dev/place/${place.slug}`
          }))
        };
        script.textContent = JSON.stringify(data);
      }
    }

    // Utility functions
    function escapeHtml(text) {
      if (!text) return '';
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function truncate(text, length) {
      if (!text) return '';
      if (text.length <= length) return text;
      return text.substring(0, length).trim() + '...';
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      loadCities();
      loadPlaces();
    });
  </script>
</body>
</html>
